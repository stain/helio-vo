<?xml version="1.0" encoding="ISO-8859-1"?>
<map idArchive="WS-NSO" version="0.1">
	<structure>
		<method name="query" parameter-number="5">
			<param name="source" index="0"/>
			<param name="instrument" index="1"/>
			<param name="observable" index="2"/>
			<param name="time_start" index="3"/>
			<param name="time_end" index="4"/>
			
			<query>
				<![CDATA[
<SOAP-ENV:Envelope xmlns:xsi="http://www.w3.org/1999/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/1999/XMLSchema" xmlns:namesp2="http://xml.apache.org/xml-soap" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
	<SOAP-ENV:Body>
		<namesp1:Query xmlns:namesp1="http://solarch.tuc.noao.edu/NSO_VSO">
			<SOAP-ENC:Array xsi:type="SOAP-ENC:Array" SOAP-ENC:arrayType="namesp2:SOAPStruct[1]">
				<item xsi:type="namesp2:SOAPStruct">
					<provider xsi:type="xsd:string">NSO</provider>
					<src xsi:type="namesp2:SOAPStruct">
						<name xsi:type="xsd:string">{0}</name>
						<instrument xsi:type="xsd:string">{1}</instrument>
					</src>
					<obs xsi:type="namesp2:SOAPStruct">
						<name xsi:type="xsd:string">{2}</name>
					</obs>
				</item>
			</SOAP-ENC:Array>
			<SOAP-ENC:Array xsi:type="SOAP-ENC:Array" SOAP-ENC:arrayType="namesp2:SOAPStruct[1]">
				<item xsi:type="namesp2:SOAPStruct">{3}{4}</item>
			</SOAP-ENC:Array>
		</namesp1:Query>
	</SOAP-ENV:Body>
</SOAP-ENV:Envelope>
				]]>
			</query>
		
		</method>
	</structure>
	
	<mapping>
		<param name="instrument">
			<value name="KPVT">
				<param name="source" value="kpvt"/>
				<param name="instrument" values="spectromagnetograph,512-channel magnetograph" separator=","/>
				<param name="observable" values="magnetogram,intensity,dopplergram,equivalent width,helium intensities,helium line_strengths,line depth" separator=","/>
			</value>
			<value name="MCMATH">
				<param name="source" value="mcmath"/>
				<param name="instrument" value="solar fts spectrometer"/>
				<param name="observable" values="interferograms,fts" separator=","/>
			</value>
			<value name="EVANS">
				<param name="source" value="evans"/>
				<param name="instrument" value="spectroheliograph"/>
				<param name="observable" values="cak,cak_offlamb,h_alpha,h_alpha_offlamb" separator=","/>
			</value>
		</param>
		
		<param name="date" size="6" begin="time_start" end="time_end">
			<map format="YYYY" nature="DATE" index="0"/>
			<map format="MM" nature="DATE" index="1"/>
			<map format="DD" nature="DATE" index="2"/>
			<map format="HH" nature="TIME" index="3"/>
			<map format="MM" nature="TIME" index="4"/>
			<map format="SS" nature="TIME" index="5"/>
			<format>
				<time_start>
					<![CDATA[
<start xsi:type="namesp2:SOAPStruct">
	<hour xsi:type="xsd:int">{3}</hour>
	<minute xsi:type="xsd:int">{4}</minute>
	<second xsi:type="xsd:int">{5}</second>
	<month xsi:type="xsd:int">{1}</month>
	<day xsi:type="xsd:int">{2}</day>
	<year xsi:type="xsd:int">{0}</year>
</start>
					]]>
				</time_start>
				<time_end>
					<![CDATA[
<end xsi:type="namesp2:SOAPStruct">
	<hour xsi:type="xsd:int">{3}</hour>
	<minute xsi:type="xsd:int">{4}</minute>
	<second xsi:type="xsd:int">{5}</second>
	<month xsi:type="xsd:int">{1}</month>
	<day xsi:type="xsd:int">{2}</day>
	<year xsi:type="xsd:int">{0}</year>
</end>
					]]>
				</time_end>
			</format>
		</param>
	
	</mapping>
	
	<info>
		<observatory name="NSO">
			<!-- TODO: Find the correct mapping. -->
			<instrument name="kpvt"   value="nso__kpvt"/>
			<instrument name="mcmath" value="nso__mcmath"/>
			<instrument name="evans"  value="nso__evans"/>
		</observatory>
	</info>
</map>
