<div>
    <h1 class="txtHeading">
        <a name=140307704></a>
        <a name=146560036></a>
        <a name=178252788></a>
        <a name=128461337>1.              Introduction</a>
         <p class="txtblackbf" > 
        </p>
    </h1>

        </p>
    </h3>
     <p class="txtblackbf" > 
         <p class="txtblackbf" > 
             
        </p>
    </p>
     <p class="txtblackbf" > 
        The purpose  is to explain Helio Query Service Property File.
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
        This document is intended for HELIO IT team members responsible for deployment and configuration of HELIO Query Service.
         <p class="txtblackbf" > 
        </p>
    </p>
    <h3 class="txtHeading"">
        <a name=128461340>1.1.2.                 Assumptions Dependencies and Constrains</a>
         <p class="txtblackbf" > 
        </p>
    </h3>
     <p class="txtblackbf" > 
        <b>
             <p class="txtblackbf" > 
                 
            </p>
        </b>
    </p>
     <p class="txtblackbf" > 
        1.     In Release 1 we are testing this service with HEC.
         <p class="txtblackbf" > 
        </p>
    </p>
    <h3 class="txtHeading">
        <a name=128461341>1.1.3.                 Abbreviation Used</a>
         <p class="txtblackbf" > 
        </p>
    </h3>
     <p class="txtblackbf" > 
              1.  HEC: Helio Event Catalogue Service.
         <p class="txtblackbf" > 
        </p>
    </p>
    <h3 class="txtHeading">
        <a name=128461342>1.1.4.                 Step To Follow For Deployment</a>
         <p class="txtblackbf" > 
        </p>
    </h3>
     <p class="txtblackbf" > 
         <p class="txtblackbf" > 
             
        </p>
    </p>
     <p class="txtblackbf" > 
        2.     Find an appropriate JDBC library ( Query Service supports Mysql database and lib file mysql.jar is included in the pakage;for any other database ; might have to download appropriate driver.) and place in location for webapp to find it. i.e tomcat/common/lib
        or WEB-INF/lib.
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
        3.     Create a property file xxxxxx.txt. Refer section 2, 3 and 4 for more details.
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
        4.     Save the property file to the system.
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
        5.     Change JNDI environment (env) entry name in web.xml pointing to your property file. Refer section 4 for configuration of property file per
        context in tomcat.
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
       <b> &nbsp;env-entry&nbsp;</b>
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
           <b>&nbsp;env-entry-name&nbsp;property/context&nbsp;/env-entry-name&nbsp;</b>
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
           <b>&nbsp;env-entry-type&nbsp;java.lang.String&nbsp;/env-entry-type&nbsp;</b>
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
           <b>&nbsp;env-entry-value&nbsp;/Users/<u>vineethtshetty</u>/HELIO/<u>sec</u>-hessi.txt&nbsp;/env-entry-value&nbsp;</b>
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
          <b>&nbsp;/env-entry&nbsp;</b>
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
        6.     Done. May required to restart the app server depending on which server you are using.
    </p>
    <p class="txtblackbf" > 
        7.	   To create the property file through web please refer section 2.
    </p>
    <p class="txtblackbf" > 
        <br/>
    </p>
     <p class="txtblackbf" > 
    </p>
    <h2 class="txtHeading">
        2. Creating Property File From Web
         <p class="txtblackbf" > 
        </p>
    </h2>
    <p class="txtblackbf" > 
        1.   Please type <a href="">http://servername:serverport/contextpath/</a> to go to configuration page.
    </p>
    <p class="txtblackbf" > 
        2.	Once you logged into configuration home page you can see 3 links: How to configure property; Create property file; Database configuration.
    </p>
    <p class="txtblackbf" > 
        3.	To see explanations of configuration parameters please go to How to configure property file: link.
    </p>
    <p class="txtblackbf" > 
        4.	To change database connections please go to Database Configuration: link.
    </p>
     <p class="txtblackbf" > 
        5.	To add columns / details to property file, please go to Create property file: link.
    </p>
     <p class="txtblackbf" > 
        6.	Once you are in to Create property file, you see list of table in a select box.
    </p>
     <p class="txtblackbf" > 
        7.	When you select tables from the select box. All the columns of the table is shown in same page.
    </p>
     <p class="txtblackbf" > 
        8.	Please select column and enter description and ucds for the columns.
    </p>
     <p class="txtblackbf" > 
        9.	Click on AddColumn button to add this info for creating the file. 
    </p>
    <p class="txtblackbf" > 
       10.	Once you are done please click on Done button. It will create the file on the path you have defined. 
    </p>
     <p class="txtblackbf" > 
        <br/>
    </p>
     <p class="txtblackbf" > 
    </p>
    <h2 class="txtHeading">
        3. Helio Query Service Property File
         <p class="txtblackbf" > 
        </p>
    </h2>
     <p class="txtblackbf" > 
         <p class="txtblackbf" > 
             
        </p>
    </p>
     <p class="txtblackbf" > 
  
        <b>jdbc.driver=</b>
        com.mysql.jdbc.Driver
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
        <b>
             <p class="txtblackbf" > 
                 
            </p>
        </b>
    </p>
     <p class="txtblackbf" > 
        <b>jdbc.url=</b>
        jdbc:mysql://msslxt.mssl.ucl.ac.uk:3306/solarevent
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
        <b>
             <p class="txtblackbf" > 
                 
            </p>
        </b>
    </p>
     <p class="txtblackbf" > 
        <b>jdbc.user=</b>
        sec
        <b>
             <p class="txtblackbf" > 
            </p>
        </b>
    </p>
     <p class="txtblackbf" > 
        <b>
             <p class="txtblackbf" > 
                 
            </p>
        </b>
    </p>
     <p class="txtblackbf" > 
        <b>jdbc.password=</b>
        solareventpwd
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
         <p class="txtblackbf" > 
             
        </p>
    </p>
     <p class="txtblackbf" > 
        //Section for configuration of query.
        <b>
             <p class="txtblackbf" > 
            </p>
        </b>
    </p>
     <p class="txtblackbf" > 
        <b>
             <p class="txtblackbf" > 
                 
            </p>
        </b>
    </p>
     <p class="txtblackbf" > 
        <b>sql.query.tablename=</b>
        select * from hessi_flare where time_start&nbsp;=[:kwstartdate:] AND time_end&nbsp;=[:kwenddate:]
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
        <b>
             <p class="txtblackbf" > 
                 
            </p>
        </b>
    </p>
     <p class="txtblackbf" > 
      
            <b>sql.query.instr.constraint.tablename=</b>ins_id=[:kwinstrument:]
             <p class="txtblackbf" > 
            </p>
        
    </p>
     <p class="txtblackbf" > 
        <b>
             <p class="txtblackbf" > 
                 
            </p>
        </b>
    </p>
     <p class="txtblackbf" > 
        <b>sql.query.orderby.constraint.tablename=</b>
        ORDER BY time_start
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
         <p class="txtblackbf" > 
             
        </p>
    </p>
     <p class="txtblackbf" > 
        <b>sql.query.maxrecord.constraint.tablename=</b>
        100
        <b>
             <p class="txtblackbf" > 
            </p>
        </b>
    </p>
     <p class="txtblackbf" > 
        <b>
             <p class="txtblackbf" > 
                 
            </p>
        </b>
    </p>
     <p class="txtblackbf" > 
        <b>sql.columnnames.tablename=</b>
        hef_id::time_start::time_peak::time_end::nar::x_arcsec::y_arcsec::radial_arcsec::duration::count_sec_peak
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
        <b>
                 
             <p class="txtblackbf" > 
            </p>
        </b>
    </p>
     <p class="txtblackbf" > 
        <b>sql.columndesc.tablename =</b>
        Sec hess Id::Time Start::Peak Time::End Time::Active Region::X sec::Y sec::Radial sec::Duration::Count sec peek::Total count::energy kev::flare number
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
         <p class="txtblackbf" > 
             
        </p>
    </p>
     <p class="txtblackbf" > 
        <b>sql.columnucd.tablename = </b>
        ::time.start::time.phase::time.end:: :: :: :: :: :: :: :: :: ::
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
         <p class="txtblackbf" > 
             
        </p>
    </p>
     <p class="txtblackbf" > 
        <b>sql.votable.head.desc=</b>
        Helio Sec time based query
         <p class="txtblackbf" > 
        </p>
    </p>
     
     <p class="txtblackbf" > 
    </p>
    <h2 class="txtHeading">
        <a name=128461344>4. Property File Element Description</a>
         <p class="txtblackbf" > 
        </p>
    </h2>
    <table border=1 cellpadding=0 cellspacing=0>
        <tbody>
            <tr>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        <b>Jdbc.driver</b>
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        JDBC driver name.
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
            </tr>
            <tr>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        <b>Jdbc.url</b>
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        JDBC URL with database name.
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
            </tr>
            <tr>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        <b>jdbc.user</b>
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        Database User Name.
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
            </tr>
            <tr>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        <b>jdbc.password</b>
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        Database password.
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
            </tr>
            <tr>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        <b>sql.query.tablename</b>
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        SQL query string with time constrain.
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
            </tr>
            <tr>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        <b>sql.query.instr.constraint.tablename</b>
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        Where clause with Instrument.
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
            </tr>
            <tr>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        <b>sql.query.orderby.constraint.tablename</b>
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        Oder by clause of the query.
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
            </tr>
            <tr>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        <b>sql.query.maxrecord.constraint.tablename</b>
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        Defining maximum record that the service should return.
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
            </tr>
            <tr>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        <b>sql.columnnames.tablename</b>
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        VOTABLE column names.  Separated by     <b>:: </b> .
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                    
                </td>
            </tr>
            <tr>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        <b>sql.columndesc.tablename</b>
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        VOTable column description. Separated by  <b>:: </b> .
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
            </tr>
            <tr>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        <b>sql.columnucd.tablename</b>
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        VOTable column UCD names. Separated by  <b>:: </b> .
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
            </tr>
            <tr>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        <b>sql.votable.head.desc</b>
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
                <td valign=top width=221>
                     <p class="txtblackbf" > 
                        VOTable heading (Description of heading).
                         <p class="txtblackbf" > 
                        </p>
                    </p>
                </td>
            </tr>
        </tbody>
    </table>
     <p class="txtblackbf" > 
         <p class="txtblackbf" > 
             
        </p>
    </p>
     <p class="txtHeading"" > 
        <b><u>IMPORTANT NOTE</u></b>
        :
    </p>
     <p class="txtblackbf" > 
       1. [:kwstartdate:] is representation of start date/time. While defining start time this key word should be used (cannot be changed).
    </p>
     <p class="txtblackbf" > 
       2. [:kwenddate:] is representation of end date/time. While defining end time this key word should be used (cannot be changed).
    </p>
     <p class="txtblackbf" > 
       3. In all the property above table name should be replaced with actual value. While creating the property file.
    </p>
     <p class="txtblackbf" > 
       4. For Example: Configuring the property file for INSTRUMENTS table. Then the tablename in the property should be replaced with INSTRUMENTS .
    </p>
     <p class="txtblackbf" > 
       5. So now the property will look like (<b>sql.query.</b> <b>INSTRUMENTS, </b>similar changes should be done for all other property) .
    </p>
     <p class="txtblackbf" > 
      6. You can configure any no of tables. Provided you are passing FROM value in wsdl with both the table names.
    </p>
     <p class="txtblackbf" > 
      7. [:kwinstrument:] is representation of INSTRUMENT. While defining Instrument column. In order to add instrument constraint, this key word should
        be used (cannot be changed).
    </p>
     <p class="txtblackbf" > 
         <p class="txtblackbf" > 
             
        </p>
    </p>
    <h2 class="txtHeading">
        <a name=128461345>5. Configuration of property file per context</a>
         <p class="txtblackbf" > 
        </p>
    </h2>
     <p class="txtblackbf" > 
        Bellow is the steps to be followed to configure property file per context.
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
         <p class="txtblackbf" > 
             
        </p>
    </p>
     <p class="txtblackbf" > 
        1.     Add &nbsp;Resource&nbsp; tag inside &nbsp;context&nbsp; tag. As shown bellow
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
        &nbsp;Resource name=<i>property/context</i> auth=<i>Container</i>
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
                                                           type=<i>java.lang.String</i>
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
                                                           factory=<i>com.org.helio.common.util.BeanFactory</i>
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
                        propertyValue=<i>C:/log/helio.txt</i>/&nbsp;
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
        2.     In the above &nbsp;Resource&nbsp; tag you can see a factory element referring to a Bean Factory class. Code for retrieving property Value is
        implemented in this class.
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
        3.     propertyValue element in &nbsp;Resource&nbsp; tag is the actual path of the property file. When I say path it is path appended with file name as
        shown.
      </p>
         <p class="txtblackbf" > 
        </p>
   
     <p class="txtblackbf" > 
        4.     type element in &nbsp;Resource&nbsp; tag defines the return type which is a String in our case.
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
        5.     If you are configuring in Tomcat server, &nbsp;Resource&nbsp; tag should be included in server.xml under &nbsp;context&nbsp; tag
         <p class="txtblackbf" > 
        </p>
    </p>
     <p class="txtblackbf" > 
    
    </p>
    
</div>